---
title: OpenStack基础操作
date: 2023-09-08 11:01:49 
tags:
---

## Horizon简介及专有名词解释

Horizon是一个开源的Web界面，用于管理和监控整个OpenStack云计算环境。它提供了直观的用户界面，允许用户通过Web浏览器执行各种云管理任务，包括创建和管理虚拟机实例、配置网络、存储、查看监控数据等。

* 项目（Project）：项目是云中的组织单位，也称为租户或帐户，它包含了一组资源（如虚拟机实例、网络、存储等）。每个用户都是一个或多个项目的成员。在项目中，用户创建和管理实例和镜像。

* 用户（User）:  用户是OpenStack云的最终使用者，用户可以属于一个或多个项目，并根据其角色和权限来访问和管理资源。

* 角色（Role）: 角色是预定义的权限集合。每个项目可以分配不同的角色给用户，以控制他们可以执行的操作。常见的角色包括管理员、成员等。

* 虚拟机实例（Instance）： 虚拟机实例是运行在 OpenStack 计算节点上的虚拟机。

* 镜像（Image）： 镜像是虚拟机实例的模板，用户可以选择不同的镜像来创建虚拟机实例。

## 访问OpenStack主界面

Horizon安装在计算节点上，可以通过浏览器`192.168.10.20`访问Horizon服务的界面，设置域名`Default`、用户名`admin`、密码`000000`完成登录。登录成功界面如下：

![1694326791438.png](https://vault.taojie.fun:28089/i/2023/09/10/2023-09-10-1694326793.png)

>通过单击右上角`admin`用户名弹出用户菜单->设置，修改语言、时区设置。

整个主界面分为以下三个顶级菜单（仪表板）：

    1. 项目：普通用户和管理员可见，用于项目内的资源管理。

    2. 管理员：仅管理员可见，用户全局的资源管理。

    3. 身份管理：管理员可用于管理整个系统的身份认证，普通用户只能管理自己的项目信息。

## 创建和操作虚拟机实例

### 前提条件

1. 实例的源：源是用来创建实例的模板，包括镜像、实例快照（镜像快照）、卷、卷快照都可以作为实例的源。

2. 实例类型：实例类型也就是实例的规格，包括虚拟CPU核心数量、内存大小、存储容量等等。

3. 密钥对：密钥对是在虚拟机实例启动时注入，用于SSH或着其他远程访问的凭证。

4. 安全组：安全组是一种网络防火墙规则集合，用于控制虚拟机实例的入站和出站流量。创建和配置安全组以允许或拒绝特定端口和协议的流量。

5. 网络：网络指的是虚拟网络，选择一个虚拟网络和子网，以确定虚拟机实例的网络配置。这包括 IP 地址分配、路由设置等。可以选择将虚拟机连接到外部网络，以实现互联网访问

>实例类型仅管理员所有，只有管理员有权访问。

1. 进入身份管理->项目面板，创建新项目`test_project`

    ![1694328079544.png](https://vault.taojie.fun:28089/i/2023/09/10/2023-09-10-1694328081.png)

2. 进入身份管理->用户面板，创建新用户`test_user`，设置密码`000000`并选择主项目`test_project`

    <img src="https://vault.taojie.fun:28089/i/2023/09/10/2023-09-10-1694328368.png" width="50%" height="50%">

3. 先从网络中下载[Fedora适用于Openstack的Cloud Base镜像](https://download.fedoraproject.org/pub/fedora/linux/releases/38/Cloud/x86_64/images/Fedora-Cloud-Base-38-1.6.x86_64.qcow2)到本地
   进入管理员->计算->镜像->创建镜像，镜像源->浏览选择刚才下载好的镜像文件，镜像格式`qcow2`，

4. 进入管理员->计算->实例类型，右上角创建实例类型，并且设置实例类型的使用权，选择项目`test_project`。

    <img src="https://vault.taojie.fun:28089/i/2023/09/10/2023-09-10-1694331566.png" alt="1694331563770.png" title="1694331563770.png" width="50%" height="50%"/>

    <img src="https://vault.taojie.fun:28089/i/2023/09/10/2023-09-10-1694331705.png" alt="1694331703092.png" title="1694331703092.png" width="50%" height="50%"/>

5. 进入管理员->

### 创建虚拟机实例

1. 侧边栏选择项目->计算->实例->创建实例，`详情`标签设置实例名称`test_instance`

2. `源`标签选择源`Image`、卷大小`1GB`、在列表中选择镜像`cirros`

    <img src="https://vault.taojie.fun:28089/i/2023/09/11/2023-09-11-1694392927.png" alt="1694392926393.png" title="1694392926393.png" />

3. `实例类型`标签选择之前创建的实例类型`small`

    <img src="https://vault.taojie.fun:28089/i/2023/09/11/2023-09-11-1694393572.png" alt="1694393570624.png" title="1694393570624.png" />
