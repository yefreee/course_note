---
title: OpenStack基础操作
date: 2023-09-08 11:01:49 
tags:
---

>控制节点快照`项目12`
>计算节点快照`项目12`

## Horizon简介、名词解释

Horizon是一个开源的Web界面，用于管理和监控整个OpenStack云计算环境。它提供了直观的用户界面，允许用户通过Web浏览器执行各种云管理任务，包括创建和管理虚拟机实例、配置网络、存储、查看监控数据等。

* 项目（Project）：项目是云中的组织单位，也称为租户或帐户，它包含了一组资源（如虚拟机实例、网络、存储等）。每个用户都是一个或多个项目的成员。在项目中，用户创建和管理实例和镜像。

* 用户（User）:  用户是OpenStack云的最终使用者，用户可以属于一个或多个项目，并根据其角色和权限来访问和管理资源。

* 角色（Role）: 角色是预定义的权限集合。每个项目可以分配不同的角色给用户，以控制他们可以执行的操作。常见的角色包括管理员、成员等。

* 虚拟机实例（Instance）： 虚拟机实例是运行在 OpenStack 计算节点上的虚拟机。

* 镜像（Image）： 镜像是虚拟机实例的模板，用户可以选择不同的镜像来创建虚拟机实例。

## 访问OpenStack主界面

Horizon安装在计算节点上，可以通过浏览器`192.168.10.20`访问Horizon服务的界面，设置域名`Default`、用户名`admin`、密码`000000`完成登录。登录成功界面如下：

![1694326791438.png](https://lsky.taojie.fun:52222/i/2023/09/10/2023-09-10-1694326793.png)

>通过单击右上角`admin`用户名弹出用户菜单->设置，修改语言、时区设置。

整个主界面分为以下三个顶级菜单（仪表板）：

    1. 项目：普通用户和管理员可见，用于项目内的资源管理。

    2. 管理员：仅管理员可见，用户全局的资源管理。

    3. 身份管理：管理员可用于管理整个系统的身份认证，普通用户只能管理自己的项目信息。

## 创建和操作虚拟机实例

### 前提条件

1. 实例的源：源是用来创建实例的模板，包括镜像、实例快照（镜像快照）、卷、卷快照都可以作为实例的源。

2. 实例类型：实例类型也就是实例的规格，包括虚拟CPU核心数量、内存大小、存储容量等等。

    >实例类型仅管理员所有，只有管理员有权访问。

3. 网络：网络指的是虚拟网络，选择一个虚拟网络和子网，以确定虚拟机实例的网络配置。这包括 IP 地址分配、路由设置等。可以选择将虚拟机连接到外部网络，以实现互联网访问

4. 密钥对：密钥对是在虚拟机实例启动时注入，用于SSH或着其他远程访问的凭证。

5. 安全组：安全组是一种网络防火墙规则集合，用于控制虚拟机实例的入站和出站流量。创建和配置安全组以允许或拒绝特定端口和协议的流量。
  
### 创建虚拟机实例

1. 创建项目

   进入身份管理->项目面板，创建新项目`test_project`

    ![1694328079544.png](https://lsky.taojie.fun:52222/i/2023/09/10/2023-09-10-1694328081.png)

2. 创建用户

    进入身份管理->用户面板，创建新用户`test_user`，设置密码`000000`并选择主项目`test_project`

    <img src="https://lsky.taojie.fun:52222/i/2023/09/10/2023-09-10-1694328368.png" alt="1694328366728.png" title="1694328366728.png" />

3. 创建镜像，这一步将Windows本地的镜像上传到云平台。

    进入管理员->计算->镜像->创建镜像，镜像源->浏览选择本地`D:\云计算上课环境\镜像-文档`目录中的镜像文件`CentOS-7-x86_64-GenericCloud-2003.qcow2`上传。

    <img src="https://lsky.taojie.fun:52222/i/2025/09/25/2025-09-25-1758763462.png" alt="1758763350892.png" title="1758763350892.png" />

   >作业1：镜像创建完成，截图镜像列列表上传。

4. 创建实例类型

    进入管理员->计算->实例类型，右上角创建实例类型，并且设置实例类型的使用权，选择项目`test_project`。

    <img src="https://lsky.taojie.fun:52222/i/2025/09/26/2025-09-26-1758897961.png" alt="1758897848080.png" title="1758897848080.png" />

    <img src="https://lsky.taojie.fun:52222/i/2023/09/18/2023-09-18-1695013697.png" alt="1695013694529.png" title="1695013694529.png" />

5. 创建网络

    * 进入管理员->网络->网络，右上角创建网络，按下图配置：

        <img src="https://lsky.taojie.fun:52222/i/2025/09/24/2025-09-24-1758691964.png" alt="1758691855099.png" title="1758691855099.png" />

    * 继续配置子网选项：

        <img src="https://lsky.taojie.fun:52222/i/2025/09/26/2025-09-26-1758897340.png" alt="1758897227912.png" title="1758897227912.png" />

    * DHCP设置、创建：

        <img src="https://lsky.taojie.fun:52222/i/2025/09/26/2025-09-26-1758897477.png" alt="1758897364206.png" title="1758897364206.png" />

6. `退出当前的admin用户，使用刚才创建的test_user用户登录`，侧边栏选择项目->计算->实例->创建实例，`详情`标签设置实例名称`test_instance`

    * `源`标签选择源`Image`、在列表中选择镜像`centos`

    * `实例类型`标签选择之前创建的实例类型。

        <img src="https://lsky.taojie.fun:52222/i/2025/09/26/2025-09-26-1758898059.png" alt="1758897946208.png" title="1758897946208.png" />

    * 在`配置`菜单中编辑以下代码段、点击创建实例：

        ```text
        #!/bin/bash
        passwd centos<<EOF
        000000
        000000
        EOF
        ```

        >这里配置的脚本用来在实例启动时设置centos账户的密码，否则不能登录控制台

        <img src="https://lsky.taojie.fun:52222/i/2025/09/25/2025-09-25-1758788640.png" alt="1758788528266.png" title="1758788528266.png" />

        >作业2：使用`centos`的镜像创建实例，在实例列表页面登录实例的控制台截图上传。

        <img src="https://lsky.taojie.fun:52222/i/2023/09/15/2023-09-15-1694785678.png" alt="1694785677644.png" title="1694785677644.png" />

        <img src="https://lsky.taojie.fun:52222/i/2025/09/25/2025-09-25-1758789049.png" alt="1758788937930.png" title="1758788937930.png" />
